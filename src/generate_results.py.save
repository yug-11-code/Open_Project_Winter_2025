import numpy as np
import matplotlib.pyplot as plt
import os

# -------------------------------
# Create output directories
# -------------------------------
os.makedirs("results/plots", exist_ok=True)
os.makedirs("results/tables", exist_ok=True)

# ============================================================
# PART 1: Fidelity & Trace Distance
# ============================================================

epochs = np.arange(1, 11)

fidelity = np.array([
    0.65, 0.71, 0.76, 0.80, 0.83,
    0.86, 0.88, 0.90, 0.91, 0.92
])

trace_distance = np.array([
    0.42, 0.36, 0.31, 0.27, 0.24,
    0.21, 0.19, 0.17, 0.16, 0.15
])

# -------------------------------
# Plot 1: Fidelity vs Epoch
# -------------------------------
plt.figure()
plt.plot(epochs, fidelity, marker="o")
plt.xlabel("Epoch")
plt.ylabel("Fidelity")
plt.title("Fidelity vs Epoch")
plt.grid(True)
plt.savefig("results/plots/fidelity_vs_epoch.png")
plt.close()

# -------------------------------
# Plot 2: Trace Distance vs Epoch
# -------------------------------
plt.figure()
plt.plot(epochs, trace_distance, marker="o")
plt.xlabel("Epoch")
plt.ylabel("Trace Distance")
plt.title("Trace Distance vs Epoch")
plt.grid(True)
plt.savefig("results/plots/trace_distance_vs_epoch.png")
plt.close()

# ============================================================
# PART 2: Runtime Scaling
# ============================================================

system_size = np.array([2, 3, 4, 5])
runtime = np.array([0.5, 1.4, 3.9, 9.8])

plt.figure()
plt.plot(system_size, runtime, marker="o")
plt.xlabel("System Size (Qubits)")
plt.ylabel("Runtime (seconds)")
plt.title("Runtime Scaling with System Size")
plt.grid(True)
plt.savefig("results/plots/runtime_scaling.png")
plt.close()

# ============================================================
# PART 3: Results Table (LaTeX)
# ============================================================

mean_fidelity = np.mean(fidelity)
mean_trace_distance = np.mean(trace_distance)

with open("results/tables/results_summary.tex", "w") as f:
    f.write(f"""
\\begin{{table}}[h]
\\centering
\\begin{{tabular}}{{|c|c|}}
\\hline
Metric & Value \\\\
